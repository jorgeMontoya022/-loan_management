<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="co.edu.uniquindio.library.prestamo_app.viewController.GestionPrestamosViewController"
            styleClass="root-container"
            stylesheets="@../styles/prestamos.css">

    <!-- HEADER -->
    <top>
        <HBox styleClass="header-container" alignment="CENTER_LEFT" spacing="20">
            <padding>
                <Insets top="20" right="30" bottom="20" left="30"/>
            </padding>

            <!-- Icono y TÃ­tulo -->
            <HBox alignment="CENTER_LEFT" spacing="15" HBox.hgrow="ALWAYS">
                <Label text="ðŸ“š" styleClass="header-icon"/>
                <Label text="GestiÃ³n de PrÃ©stamos" styleClass="header-title"/>
            </HBox>

            <!-- BotÃ³n Volver -->
            <Button fx:id="btnVolver" text="â† Volver" styleClass="btn-secondary"
                    onAction="#onVolverClick">
                <padding>
                    <Insets top="10" right="20" bottom="10" left="20"/>
                </padding>
            </Button>
        </HBox>
    </top>

    <!-- CONTENIDO PRINCIPAL -->
    <center>
        <VBox styleClass="content-container" spacing="20">
            <padding>
                <Insets top="20" right="30" bottom="20" left="30"/>
            </padding>

            <!-- BARRA DE BÃšSQUEDA Y BOTÃ“N NUEVO -->
            <HBox alignment="CENTER_LEFT" spacing="20">

                <!-- Campo de BÃºsqueda -->
                <HBox styleClass="search-container" alignment="CENTER_LEFT"
                      spacing="10" HBox.hgrow="ALWAYS">
                    <padding>
                        <Insets top="12" right="15" bottom="12" left="15"/>
                    </padding>

                    <Label text="ðŸ”" styleClass="search-icon"/>
                    <TextField fx:id="txtBuscar"
                               promptText="Buscar por usuario, libro, bibliotecario o ID..."
                               styleClass="search-field"
                               onKeyReleased="#onBuscarKeyReleased"
                               HBox.hgrow="ALWAYS">
                    </TextField>
                </HBox>

                <!-- BotÃ³n Nuevo PrÃ©stamo -->
                <Button fx:id="btnNuevo" text="âœš Nuevo PrÃ©stamo"
                        styleClass="btn-primary"
                        onAction="#onNuevoPrestamoClick">
                    <padding>
                        <Insets top="12" right="25" bottom="12" left="25"/>
                    </padding>
                </Button>
            </HBox>

            <!-- TABLA DE PRÃ‰STAMOS -->
            <TableView fx:id="tblPrestamos"
                       styleClass="table-prestamos"
                       VBox.vgrow="ALWAYS">
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>

                <columns>
                    <!-- Columna ID -->
                    <TableColumn fx:id="colId" text="ID"
                                 prefWidth="60" minWidth="60" maxWidth="80"
                                 styleClass="col-id">
                    </TableColumn>

                    <!-- Columna Usuario -->
                    <TableColumn fx:id="colUsuario" text="USUARIO"
                                 prefWidth="180" minWidth="150"
                                 styleClass="col-usuario">
                    </TableColumn>

                    <!-- Columna Ejemplar -->
                    <TableColumn fx:id="colEjemplar" text="EJEMPLAR"
                                 prefWidth="220" minWidth="180"
                                 styleClass="col-ejemplar">
                    </TableColumn>

                    <!-- Columna Bibliotecario -->
                    <TableColumn fx:id="colBibliotecario" text="BIBLIOTECARIO"
                                 prefWidth="160" minWidth="140"
                                 styleClass="col-bibliotecario">
                    </TableColumn>

                    <!-- Columna Fecha Inicio -->
                    <TableColumn fx:id="colFechaInicio" text="FECHA INICIO"
                                 prefWidth="120" minWidth="110"
                                 styleClass="col-fecha">
                    </TableColumn>

                    <!-- Columna Fecha Fin Compromiso -->
                    <TableColumn fx:id="colFechaCompromiso" text="FECHA FIN"
                                 prefWidth="120" minWidth="110"
                                 styleClass="col-fecha">
                    </TableColumn>

                    <!-- Columna Estado -->
                    <TableColumn fx:id="colEstado" text="ESTADO"
                                 prefWidth="120" minWidth="100"
                                 styleClass="col-estado">
                    </TableColumn>
                </columns>

                <!-- Mensaje cuando estÃ¡ vacÃ­a -->
                <placeholder>
                    <VBox alignment="CENTER" spacing="15">
                        <padding>
                            <Insets top="40" bottom="40"/>
                        </padding>
                        <Label text="ðŸ“‹" style="-fx-font-size: 48px;"/>
                        <Label text="No hay prÃ©stamos registrados" styleClass="empty-message"/>
                        <Label text="Haga clic en 'Nuevo PrÃ©stamo' para registrar el primer prÃ©stamo"
                               styleClass="empty-hint"/>
                    </VBox>
                </placeholder>
            </TableView>

            <!-- PAGINACIÃ“N -->
            <HBox alignment="CENTER" spacing="10" styleClass="pagination-container">
                <padding>
                    <Insets top="15" bottom="10"/>
                </padding>

                <Label fx:id="lblPaginacion" text="Mostrando 0-0 de 0"
                       styleClass="pagination-text"/>

                <Region HBox.hgrow="ALWAYS"/>

                <Button fx:id="btnPaginaAnterior" text="â—€"
                        styleClass="btn-pagination"
                        onAction="#onPaginaAnteriorClick">
                    <padding>
                        <Insets top="8" right="12" bottom="8" left="12"/>
                    </padding>
                </Button>

                <Label fx:id="lblPaginaActual" text="1" styleClass="page-number"/>
                <Label text="/" styleClass="page-separator"/>
                <Label fx:id="lblTotalPaginas" text="1" styleClass="page-total"/>

                <Button fx:id="btnPaginaSiguiente" text="â–¶"
                        styleClass="btn-pagination"
                        onAction="#onPaginaSiguienteClick">
                    <padding>
                        <Insets top="8" right="12" bottom="8" left="12"/>
                    </padding>
                </Button>
            </HBox>

        </VBox>
    </center>

</BorderPane>