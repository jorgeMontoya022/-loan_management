<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="co.edu.uniquindio.library.prestamo_app.viewController.UsuarioViewController"
            styleClass="root-container"
            stylesheets="@../styles/usuarios.css">

    <!-- HEADER -->
    <top>
        <HBox styleClass="header-container" alignment="CENTER_LEFT" spacing="20">
            <padding>
                <Insets top="20" right="30" bottom="20" left="30"/>
            </padding>

            <!-- Icono y TÃ­tulo -->
            <HBox alignment="CENTER_LEFT" spacing="15" HBox.hgrow="ALWAYS">
                <Label text="ðŸ‘¥" styleClass="header-icon"/>
                <Label text="GestiÃ³n de Usuarios" styleClass="header-title"/>
            </HBox>

            <!-- BotÃ³n Volver -->
            <Button fx:id="btnVolver" text="â† Volver" styleClass="btn-secondary"
                    onAction="#onVolverClick">
                <padding>
                    <Insets top="10" right="20" bottom="10" left="20"/>
                </padding>
            </Button>
        </HBox>
    </top>

    <!-- CONTENIDO PRINCIPAL -->
    <center>
        <VBox styleClass="content-container" spacing="20">
            <padding>
                <Insets top="20" right="30" bottom="20" left="30"/>
            </padding>

            <!-- BARRA DE BÃšSQUEDA Y BOTÃ“N NUEVO -->
            <HBox alignment="CENTER_LEFT" spacing="20">

                <!-- Campo de BÃºsqueda -->
                <HBox styleClass="search-container" alignment="CENTER_LEFT"
                      spacing="10" HBox.hgrow="ALWAYS">
                    <padding>
                        <Insets top="12" right="15" bottom="12" left="15"/>
                    </padding>

                    <Label text="ðŸ”" styleClass="search-icon"/>
                    <TextField fx:id="txtBuscar"
                               promptText="Buscar por nombre, documento o email..."
                               styleClass="search-field"
                               onKeyReleased="#onBuscarKeyReleased"
                               HBox.hgrow="ALWAYS">
                    </TextField>
                </HBox>

                <!-- BotÃ³n Nuevo Usuario -->
                <Button fx:id="btnNuevo" text="âœš Nuevo Usuario"
                        styleClass="btn-primary"
                        onAction="#onNuevoUsuarioClick">
                    <padding>
                        <Insets top="12" right="25" bottom="12" left="25"/>
                    </padding>
                </Button>
            </HBox>

            <!-- TABLA DE USUARIOS -->
            <TableView fx:id="tblUsuarios"
                       styleClass="table-usuarios"
                       VBox.vgrow="ALWAYS">
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>

                <columns>
                    <!-- Columna ID -->
                    <TableColumn fx:id="colId" text="ID"
                                 prefWidth="60" minWidth="60" maxWidth="80"
                                 styleClass="col-id">
                    </TableColumn>

                    <!-- Columna Nombre Completo -->
                    <TableColumn fx:id="colNombre" text="NOMBRE COMPLETO"
                                 prefWidth="220" minWidth="180"
                                 styleClass="col-nombre">
                    </TableColumn>

                    <!-- Columna Documento -->
                    <TableColumn fx:id="colDocumento" text="DOCUMENTO"
                                 prefWidth="140" minWidth="120"
                                 styleClass="col-documento">
                    </TableColumn>

                    <!-- Columna Programa -->
                    <TableColumn fx:id="colPrograma" text="PROGRAMA"
                                 prefWidth="180" minWidth="150"
                                 styleClass="col-programa">
                    </TableColumn>

                    <!-- Columna Email -->
                    <TableColumn fx:id="colEmail" text="EMAIL"
                                 prefWidth="240" minWidth="200"
                                 styleClass="col-email">
                    </TableColumn>

                    <!-- Columna Estado -->
                    <TableColumn fx:id="colEstado" text="ESTADO"
                                 prefWidth="120" minWidth="100"
                                 styleClass="col-estado">
                    </TableColumn>

                    <!-- Columna Acciones -->
                    <TableColumn fx:id="colAcciones" text="ACCIONES"
                                 prefWidth="180" minWidth="160"
                                 styleClass="col-acciones"
                                 sortable="false">
                    </TableColumn>
                </columns>

                <!-- Mensaje cuando estÃ¡ vacÃ­a -->
                <placeholder>
                    <VBox alignment="CENTER" spacing="15">
                        <padding>
                            <Insets top="40" bottom="40"/>
                        </padding>
                        <Label text="ðŸ“‹" style="-fx-font-size: 48px;"/>
                        <Label text="No hay usuarios registrados" styleClass="empty-message"/>
                        <Label text="Haga clic en 'Nuevo Usuario' para agregar el primer usuario"
                               styleClass="empty-hint"/>
                    </VBox>
                </placeholder>
            </TableView>

            <!-- PAGINACIÃ“N (Opcional - puedes comentar si no lo necesitas) -->
            <HBox alignment="CENTER" spacing="10" styleClass="pagination-container">
                <padding>
                    <Insets top="15" bottom="10"/>
                </padding>

                <Label fx:id="lblPaginacion" text="Mostrando 1-5 de 45"
                       styleClass="pagination-text"/>

                <Region HBox.hgrow="ALWAYS"/>

                <Button fx:id="btnPaginaAnterior" text="â—€"
                        styleClass="btn-pagination"
                        onAction="#onPaginaAnteriorClick">
                    <padding>
                        <Insets top="8" right="12" bottom="8" left="12"/>
                    </padding>
                </Button>

                <Label fx:id="lblPaginaActual" text="1" styleClass="page-number"/>
                <Label text="/" styleClass="page-separator"/>
                <Label fx:id="lblTotalPaginas" text="9" styleClass="page-total"/>

                <Button fx:id="btnPaginaSiguiente" text="â–¶"
                        styleClass="btn-pagination"
                        onAction="#onPaginaSiguienteClick">
                    <padding>
                        <Insets top="8" right="12" bottom="8" left="12"/>
                    </padding>
                </Button>
            </HBox>

        </VBox>
    </center>

</BorderPane>